# Eden - מערכת ניהול אחזקת מבנים

## What This Is

מערכת לניהול משימות אחזקת מבנים עם שילוב WhatsApp. מנהל מבנה יכול ליצור משימות חוזרות או חד-פעמיות, להקצותן לעובדים דרך WhatsApp, ולעקוב בזמן אמת אחרי ההתקדמות. העובדים מקבלים דפים אינטראקטיביים שדרכם הם מסמנים משימות כהושלמו, מצרפים תמונות והערות.

## Core Value

מנהל המבנה רואה בזמן אמת מה קורה בשטח - איזה משימה הושלמה, מי עושה מה, ומה מתעכב. זה חייב לעבוד בזמן אמת כדי שהמנהל יוכל להגיב מהר לבעיות.

## Requirements

### Validated

הפיצ'רים הבאים כבר קיימים ועובדים במערכת:

- ✓ יצירת משימות (חד-פעמיות וחוזרות: יומי/שבועי/חודשי/שנתי) — existing
- ✓ ניהול עובדים עם מספרי טלפון — existing
- ✓ ניהול מערכות (מיזוג, אבטחה, מים, וכו') — existing
- ✓ ניהול מיקומים — existing
- ✓ ניהול ספקים — existing
- ✓ חיבור WhatsApp דרך QR code (WhatsApp Web) — existing
- ✓ שליחת משימות לעובדים ב-WhatsApp (טקסט + קישור לדף אינטראקטיבי) — existing
- ✓ דפי אישור אינטראקטיביים (HTML סטטי ב-Vercel) — existing
- ✓ סימון משימות כהושלמו בדף האינטראקטיבי — existing
- ✓ יצירה אוטומטית של משימות חוזרות — existing
- ✓ תצוגת "משימות היום" למנהל — existing

### Active

הפיצ'רים הבאים צריכים להתווסף למערכת:

- [ ] עדכונים בזמן אמת (WebSocket) - המנהל רואה מיד כשעובד מסיים משימה
- [ ] העלאת תמונות בדף האינטראקטיבי - עובד יכול לצרף תמונה כהוכחה שהמשימה הושלמה
- [ ] הוספת הערות למשימות - עובד יכול להוסיף הערה או לדווח על בעיה
- [ ] סימון אוטומטי של משימות מאוחרות - משימות שעבר הזמן שלהן מסומנות באדום
- [ ] ארכיון משימות (שמירה ל-2 שנים אחורה) - ניתן לצפות בהיסטוריה של משימות ישנות
- [ ] מעקב אחר מצב משימות (pending/sent/in_progress/completed/late) - סטטוסים ברורים יותר

### Out of Scope

- התרעות/נוטיפיקציות בדפדפן - לא רלוונטי, המנהל רואה בזמן אמת
- אפליקציית מובייל נפרדת - הדפים האינטראקטיביים כבר מותאמים למובייל
- אימות משתמשים - המערכת פתוחה, הדפים האינטראקטיביים נגישים לכל מי שיש לו את הקישור
- דיווחים וסטטיסטיקות מתקדמות - לא בשלב הראשון, רק תצוגה בסיסית
- תזכורות אוטומטיות לעובדים - לא צריך בשלב זה

## Context

**מצב נוכחי:**
- הקוד הקיים במאגר הוא ההתחלה של המערכת
- יש ממשק React מלא עם ניהול משימות, עובדים, מערכות, ספקים, מיקומים
- יש שרת Node.js/Express עם SQLite
- שילוב WhatsApp דרך whatsapp-web.js עובד
- דפי אישור אינטראקטיביים מתארחים ב-Vercel (static HTML)

**סביבת פיתוח:**
- Frontend: React 19 + Vite + Tailwind CSS
- Backend: Node.js + Express + SQLite (better-sqlite3)
- WhatsApp: whatsapp-web.js (unofficial API)
- Deployment: Vercel לדפים סטטיים, Git-based workflow

**בעיות ידועות בקוד הקיים (לא נתקן עכשיו):**
- אין WebSocket - זה מה שצריך להוסיף
- Git operations חוסמים את השרת - זה עדיין נשאר כך
- אין אימות משתמשים - המערכת פתוחה בכוונה
- הרבה console.log - זה בסדר לעכשיו

## Constraints

- **Tech stack**: חייבים להישאר עם React + Node.js + SQLite - אין מעבר לטכנולוגיות אחרות
- **WhatsApp**: חייבים להשתמש ב-whatsapp-web.js (לא WhatsApp Business API) כי זה מה שכבר עובד
- **Static hosting**: הדפים האינטראקטיביים חייבים להישאר סטטיים (HTML) כי זה כבר עובד עם Vercel
- **Hebrew**: כל הממשק בעברית - הודעות, תגובות, UI
- **No authentication**: המערכת פתוחה - אין צורך באימות משתמשים

## Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| WebSocket במקום polling | המנהל צריך לראות עדכונים מיידיים, polling גורם לעיכובים ולעומס | — Pending |
| תמונות נשמרות בשרת | לא משתמשים בשירות חיצוני (S3/Cloudflare) כדי לשמור על פשטות | — Pending |
| הערות כטקסט חופשי | עובדים כותבים הערות חופשיות, לא טפסים מובנים | — Pending |
| ארכיון 2 שנים | שמירה ארוכת טווח לצורך מעקב היסטורי ותחזוקה | — Pending |
| סטטוס "late" אוטומטי | המערכת מסמנת משימות מאוחרות אוטומטית בהתבסס על השעה שהוגדרה | — Pending |

---
*Last updated: 2026-01-19 after initialization*
